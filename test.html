<!DOCTYPE html>

<html>
	<head>
		<style>
		</style> 

		<meta charset="utf8">
		<title>Opening a SPIDER file</title>

		<script src="spiderParser.js" type="text/javascript"></script>
		<script type="text/javascript">
			var fileContents = [] ;

			function readFile() {
				var type ;

				var typeRadio = document.forms.type ;
				for(var i = 0 ; i < typeRadio.length ; i++)
					if(typeRadio.type[i].checked==true)
						type = typeRadio.type[i].value ;

				var file = document.getElementById('file-input').files[0];
				if(!file) {
					alert('aucun fichier Sélectionner') ;
					return ;
				}

				readSpiderFile(file, type, callback) ;
			}

			function callback(imagePix, type) {
				fileContents = imagePix ;
				if(type === 'stack') {
					displayImage(fileContents[0], document.getElementById("myCanvas")) ;
					var slide = document.getElementById("slide") ;
					slide.min = 1 ;
					slide.max = fileContents.length ;
				}
				else
					displayImage(fileContents, document.getElementById("myCanvas")) ;
			}

			function updateImage(newValue){
				var slidevalue = document.getElementById("slidevalue") ;
				slidevalue.value = newValue;
				slidevalue.innerHTML = "Image : " + slidevalue.value ;
				displayImage(fileContents[slidevalue.value - 1] , document.getElementById("myCanvas")) ;
			}
		</script>
	</head>

	Sélectionner le fichier SPIDER : <input type="file" id="file-input" accept="image/spi" /><br>

	<form name="type">
		<input type="radio" name="type" value="image" checked> Ouvrir une seule image SPIDER<br>
		<input type="radio" name="type" value="stack"> Ouvrir une pile d'images SPIDER<br>
	</form>

  	<input type="button" onclick="readFile()" value="Valider">

	<h3>Displaying image</h3>
	<canvas id="myCanvas" width="0" height="0"></canvas> 

	<center><input id="slide" type="range"  min="0" max="0" step="1" onchange="updateImage(this.value)"/><br>
	<label id="slidevalue" for="value">Image : 1</label>
	</center>

</html>